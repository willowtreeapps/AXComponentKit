{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"There is a good amount of work involved in setting up "},{"type":"codeVoice","code":"AXComponentKit"},{"type":"text","text":", but the benefits of all of that work will be obvious once you start writing tests.  You should see quickly how the safety built into the framework for both querying elements and navigating throughout the app will make your tests easier both to write as well as to maintain than approaches that rely more heavily on team norms for best practices regarding safety."}]},{"anchor":"Your-First-Test","level":3,"type":"heading","text":"Your First Test"},{"anchor":"Setup-Your-Test-Case","level":4,"type":"heading","text":"Setup Your Test Case"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Test classes are typically constructed around the screen where the tests they contain start, however, more complex screens may be represented in more than one test class with the tests in each of those classes being defined by the functionality that they are testing. The following example references a simple screen in the test app, so one test class will suffice here.  When setting up a new test class, it is helpful to override the class’ "},{"type":"codeVoice","code":"setup"},{"type":"text","text":" method, which is called at the beginning of each test with any code required to navigate to the screen being tested in the class."}]},{"type":"codeListing","syntax":"swift","code":["@MainActor","final class SecondTabScreenTests: XCTestCase {","    override func setUp(completion: @escaping (Error?) -> Void) {","        setUp(completion: completion) {","            XCUIApplication().launch()","            try await FirstTabScreen.navigate(toTab: \\.second)","        }","    }"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this example "},{"type":"codeVoice","code":"setup"},{"type":"text","text":" launches the app, and because this class is for tests of "},{"type":"codeVoice","code":"SecondTabScreen"},{"type":"text","text":", the app will navigate immediately from the first tab to the second.  This code only has to be written once rather than at the beginning of each test."}]},{"anchor":"Writing-a-Test","level":4,"type":"heading","text":"Writing a Test"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"SecondTabScreen"},{"type":"text","text":" contains a numbered list of rows in a "},{"type":"codeVoice","code":"ScrollView"},{"type":"text","text":".  It is important to note that each of these rows has an identifier of type "},{"type":"codeVoice","code":"AXDynamicComponent"},{"type":"text","text":", meaning that it has a unique identifier based on its row index. With this starting point, adding a test that taps the 4th item in a row looks like this."}]},{"type":"codeListing","syntax":"swift","code":["final class SecondTabScreenTests: XCTestCase {","...","    func testCanTapSpecificRow() async throws {","        let row = try await SecondTabScreen.element(\\.rowItem, value: 3)","        row.tap()","    }","}"]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This query is marked with "},{"type":"codeVoice","code":"try"},{"type":"text","text":" and "},{"type":"codeVoice","code":"await"},{"type":"text","text":" to ensure safety by waiting for the the row to exist and failing the test before the tap if it does not."}]}],"type":"aside","name":"Note"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This test queries the 4th row and then taps it to navigate to a detail screen, but this logic assumes that the 4th item in the list is visible, which is not necessarily true if the view scrolls.  To reduce potential flakiness in this test that could occur as the screen grows and scales, we can make it safer by adding in the ability for the app to scroll if the element "},{"type":"emphasis","inlineContent":[{"type":"text","text":"might not be"}]},{"type":"text","text":" visible.  If the element is visible initially, it will be returned without scrolling."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Typically, scrolling behavior in UI tests is tedious to write and can be flaky given the lack of clarity regarding the direction and duration of scrolling behavior, but "},{"type":"codeVoice","code":"AXComponentKit"},{"type":"text","text":" makes writing this code easy by providing methods for scrolling lists of "},{"type":"codeVoice","code":"AXDynamicComponent"},{"type":"text","text":"s that can be packaged into a navigation operation like so."}]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The following example shows a method with the same signature in two different extensions.  We "},{"type":"emphasis","inlineContent":[{"type":"text","text":"strongly"}]},{"type":"text","text":" recommend that you follow this model when implementing navigation operations to make your code as clean and clear at the call-site as possible.  For more information on how to implement navigation operations see “insert link here”."}]}],"type":"aside","name":"Note"},{"type":"codeListing","syntax":"swift","code":["extension SecondTabScreen {","    @discardableResult","    static func navigate(","        toItem ordinal: Int,","        file: StaticString = #file,","        line: UInt = #line","    ) async throws -> AXScreenNavigator<DetailScreen> {","        try await Navigator().navigate(toItem: ordinal, file: file, line: line)","    }","}","","extension AXScreenNavigator where Source == SecondTabScreen {","    @discardableResult","    func navigate(","        toItem ordinal: Int,","        file: StaticString = #file,","        line: UInt = #line","    ) async throws -> AXScreenNavigator<DetailScreen> {","        try await performNavigation(file: file, line: line) { screen in","            try await scroll(to: \\.rowItem, value: ordinal, in: \\.table, file: file, line: line)","            let rowItem = try await screen.element(\\.rowItem, value: ordinal, file: file, line: line)","            rowItem.tap()","        }","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"With a navigation operation that takes care of the scrolling behavior in place, we can call "},{"type":"codeVoice","code":"navigate(toItem)"},{"type":"text","text":" on "},{"type":"codeVoice","code":"SecondTabScreen"},{"type":"text","text":" like so."}]},{"type":"codeListing","syntax":"swift","code":["func testCanNavigateToDetailScreen() async throws {","    try await SecondTabScreen.navigate(toItem: 3)","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A test that "},{"type":"emphasis","inlineContent":[{"type":"text","text":"must"}]},{"type":"text","text":" scroll to find the specified element would be essentially identical."}]},{"type":"codeListing","syntax":"swift","code":["func testCanScrollDownAndNavigate() async throws {","    try await SecondTabScreen.navigate(toItem: 80)","}"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/axcomponentkittestsupport"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Writing your first UI test"}],"kind":"symbol","metadata":{"roleHeading":"Framework","externalID":"AXComponentKitTestSupport","title":"AXComponentKitTestSupport","symbolKind":"module","role":"collection","modules":[{"name":"AXComponentKitTestSupport"}]},"hierarchy":{"paths":[[]]},"topicSections":[{"title":"Articles","identifiers":["doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/GettingStarted","doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/Navigators"],"generated":true},{"title":"Protocols","identifiers":["doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/AXTabBarNavigable"]},{"title":"Structures","identifiers":["doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/AXScreenNavigator","doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/AXTabComponent"]},{"title":"Enumerations","identifiers":["doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/ScrollDirection"]}],"references":{"doc://AXComponentKitTestSupport/documentation/AXComponentKitTestSupport":{"role":"collection","title":"AXComponentKitTestSupport","abstract":[{"type":"text","text":"Writing your first UI test"}],"identifier":"doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport","kind":"symbol","type":"topic","url":"\/documentation\/axcomponentkittestsupport"},"doc://AXComponentKitTestSupport/documentation/AXComponentKitTestSupport/ScrollDirection":{"role":"symbol","title":"ScrollDirection","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ScrollDirection"}],"abstract":[],"identifier":"doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/ScrollDirection","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ScrollDirection"}],"url":"\/documentation\/axcomponentkittestsupport\/scrolldirection"},"doc://AXComponentKitTestSupport/documentation/AXComponentKitTestSupport/GettingStarted":{"role":"article","title":"Getting Started with UI testing and AXComponentKit","abstract":[{"type":"text","text":"There are things you need to know"}],"identifier":"doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/GettingStarted","kind":"article","type":"topic","url":"\/documentation\/axcomponentkittestsupport\/gettingstarted"},"doc://AXComponentKitTestSupport/documentation/AXComponentKitTestSupport/Navigators":{"role":"article","title":"Navigators","abstract":[{"type":"text","text":"How to make tests move from one place to another"}],"identifier":"doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/Navigators","kind":"article","type":"topic","url":"\/documentation\/axcomponentkittestsupport\/navigators"},"doc://AXComponentKitTestSupport/documentation/AXComponentKitTestSupport/AXTabBarNavigable":{"role":"symbol","title":"AXTabBarNavigable","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"AXTabBarNavigable"}],"abstract":[],"identifier":"doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/AXTabBarNavigable","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AXTabBarNavigable"}],"url":"\/documentation\/axcomponentkittestsupport\/axtabbarnavigable"},"doc://AXComponentKitTestSupport/documentation/AXComponentKitTestSupport/AXTabComponent":{"role":"symbol","title":"AXTabComponent","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AXTabComponent"}],"abstract":[{"type":"text","text":"Identifies a "},{"type":"codeVoice","code":"TabItem"},{"type":"text","text":" by its name, since iOS doesn’t allow developers to"},{"type":"text","text":" "},{"type":"text","text":"specify accessibility identifiers for those elements."}],"identifier":"doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/AXTabComponent","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AXTabComponent"}],"url":"\/documentation\/axcomponentkittestsupport\/axtabcomponent"},"doc://AXComponentKitTestSupport/documentation/AXComponentKitTestSupport/AXScreenNavigator":{"role":"symbol","title":"AXScreenNavigator","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AXScreenNavigator"}],"abstract":[{"type":"text","text":"Provides a composable interface for navigating between screens of content"}],"identifier":"doc:\/\/AXComponentKitTestSupport\/documentation\/AXComponentKitTestSupport\/AXScreenNavigator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AXScreenNavigator"}],"url":"\/documentation\/axcomponentkittestsupport\/axscreennavigator"}}}